<script src="{{ site.url }}ui/js/article_custom.js" type="text/javascript" charset="utf-8"></script>
<script src="{{ site.url }}ui/js/article_share.js" type="text/javascript" charset="utf-8"></script>
<script src="{{ site.url }}ui/js/polyfill.min.js"></script>
<script src="{{ site.url }}ui/js/ads.js"></script>

{% if site.mode == 'development-w-grunt' %}
    <script type='text/javascript'>//<![CDATA[
    </script>
  {% elsif site.mode != 'development' %}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', '{{ site.analytics.ga_tracking_id }}', 'auto');
      ga('send', 'pageview');

    </script>
{% endif %}

<!-- Run Baseline-element.js to resize images so that they conform to the baseline grid. Set baseline variable to the baseline height and set the selector for the elements to be sized. https://github.com/betsol/baseline-element -->
<script type="text/javascript">
    var baseline = 18;
    $('.responsive-img').baselineElement(baseline);
</script>

<!-- This implements the :has Pseudo-Class selector from editor's draft of the CSS Selectors Level 4 as described here: http://www.ericponto.com/blog/2015/01/10/has-pseudo-class-parent-selector/. Requires jquery, polyfill.js)-->
<script>
    Polyfill({
        selectors: [":has"]
    }).doMatched(rules => {
        rules.each(rule => {
            // just pass it into jQuery since it supports `:has`
            $(rule.getSelectors()).css(rule.getDeclaration())
        });
    });
</script>

<!-- Serve ads-->
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('ad-300x600'); });
googletag.cmd.push(function() { googletag.display('ad-leaderboard'); });
googletag.cmd.push(function() { googletag.display('ad-bigbox'); });
googletag.cmd.push(function() { googletag.display('ad-bigboxlower'); });
</script>
<script id="dsq-count-scr" src="//thetyee.disqus.com/count.js" async></script>
